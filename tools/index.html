<!doctype html>
<html lang="ja" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tool Collection</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&amp;family=Space+Grotesk:wght@500;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    .font-display {
      font-family: 'Space Grotesk', 'Noto Sans JP', sans-serif;
    }
    .font-body {
      font-family: 'Noto Sans JP', sans-serif;
    }
    .tool-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .tool-card:hover {
      transform: translateY(-4px);
    }
    .new-badge {
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    .category-btn {
      transition: all 0.2s ease;
    }
    .category-btn.active {
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      color: white;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-body">
  <div id="app" class="h-full w-full overflow-auto" style="background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);"><!-- Header -->
   <header class="relative py-16 px-6 text-center overflow-hidden">
    <div class="absolute inset-0 opacity-30">
     <div class="absolute top-10 left-10 w-72 h-72 bg-purple-500 rounded-full filter blur-3xl"></div>
     <div class="absolute bottom-10 right-10 w-96 h-96 bg-indigo-500 rounded-full filter blur-3xl"></div>
    </div>
    <div class="relative z-10">
     <h1 id="site-title" class="font-display text-5xl md:text-6xl font-bold text-white mb-4 tracking-tight">ãƒ„ãƒ¼ãƒ«ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</h1>
     <p id="site-description" class="text-xl text-slate-300 max-w-2xl mx-auto">ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã‚’é›†ã‚ã¾ã—ãŸ</p>
    </div>
   </header><!-- Category Filter -->
   <nav class="px-6 pb-8">
    <div class="flex flex-wrap justify-center gap-3" id="category-filters"><!-- ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ã¯å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
    </div>
   </nav><!-- Tools Grid -->
   <main class="px-6 pb-16">
    <div id="tools-grid" class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"><!-- ãƒ„ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ã¯å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
    </div><!-- No Results -->
    <div id="no-results" class="hidden text-center py-16">
     <div class="text-6xl mb-4">
      ğŸ”
     </div>
     <p class="text-slate-400 text-lg">è©²å½“ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>
    </div>
   </main><!-- Footer -->
   <footer class="border-t border-slate-700/50 py-8 px-6 text-center">
    <p class="text-slate-500 text-sm"><span id="tool-count">0</span> å€‹ã®ãƒ„ãƒ¼ãƒ«ã‚’æ²è¼‰ä¸­</p>
   </footer>
  </div>
  <script>
    // ============================================
    // ãƒ„ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆã“ã“ã«æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ï¼‰
    // ============================================
    const TOOLS = [
      {
        id: 'color-picker',
        name: 'ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼',
        description: 'ç”»é¢ä¸Šã®è‰²ã‚’å–å¾—ã§ãã‚‹ãƒ„ãƒ¼ãƒ«',
        icon: 'ğŸ¨',
        category: 'ãƒ‡ã‚¶ã‚¤ãƒ³',
        url: 'https://example.com/color-picker',
        addedDate: '2025-01-10' // è¿½åŠ æ—¥ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
      },
      {
        id: 'json-formatter',
        name: 'JSONæ•´å½¢ãƒ„ãƒ¼ãƒ«',
        description: 'JSONã‚’è¦‹ã‚„ã™ãæ•´å½¢ãƒ»æ¤œè¨¼',
        icon: 'ğŸ“‹',
        category: 'é–‹ç™º',
        url: 'https://example.com/json-formatter',
        addedDate: '2025-01-08'
      },
      {
        id: 'image-compressor',
        name: 'ç”»åƒåœ§ç¸®',
        description: 'ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’è»½é‡åŒ–',
        icon: 'ğŸ–¼ï¸',
        category: 'ãƒ¡ãƒ‡ã‚£ã‚¢',
        url: 'https://example.com/image-compressor',
        addedDate: '2025-01-12'
      },
      {
        id: 'password-generator',
        name: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ',
        description: 'å®‰å…¨ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆ',
        icon: 'ğŸ”',
        category: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£',
        url: 'https://example.com/password-generator',
        addedDate: '2024-12-20'
      },
      {
        id: 'qr-generator',
        name: 'QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ',
        description: 'URLã‚„ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰QRã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ',
        icon: 'ğŸ“±',
        category: 'ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£',
        url: 'https://example.com/qr-generator',
        addedDate: '2025-01-11'
      },
      {
        id: 'markdown-editor',
        name: 'Markdownã‚¨ãƒ‡ã‚£ã‚¿',
        description: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä»˜ãã‚¨ãƒ‡ã‚£ã‚¿',
        icon: 'ğŸ“',
        category: 'é–‹ç™º',
        url: 'https://example.com/markdown-editor',
        addedDate: '2024-11-15'
      },
      {
        id: 'unit-converter',
        name: 'å˜ä½å¤‰æ›',
        description: 'é•·ã•ãƒ»é‡ã•ãƒ»æ¸©åº¦ãªã©ã‚’å¤‰æ›',
        icon: 'ğŸ“',
        category: 'ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£',
        url: 'https://example.com/unit-converter',
        addedDate: '2024-10-01'
      },
      {
        id: 'gradient-maker',
        name: 'ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ',
        description: 'ç¾ã—ã„CSSã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆ',
        icon: 'ğŸŒˆ',
        category: 'ãƒ‡ã‚¶ã‚¤ãƒ³',
        url: 'https://example.com/gradient-maker',
        addedDate: '2025-01-09'
      }
    ];

    // ============================================
    // æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹æ–¹æ³•
    // ============================================
    // ä¸Šã®TOOLSé…åˆ—ã«ä»¥ä¸‹ã®å½¢å¼ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š
    // {
    //   id: 'unique-id',        // ä¸€æ„ã®ID
    //   name: 'ãƒ„ãƒ¼ãƒ«å',        // è¡¨ç¤ºå
    //   description: 'èª¬æ˜æ–‡',   // ç°¡å˜ãªèª¬æ˜
    //   icon: 'çµµæ–‡å­—',          // ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰
    //   category: 'ã‚«ãƒ†ã‚´ãƒª',    // ã‚«ãƒ†ã‚´ãƒªå
    //   url: 'https://...',     // ãƒªãƒ³ã‚¯å…ˆURL
    //   addedDate: 'YYYY-MM-DD' // è¿½åŠ æ—¥
    // }

    // ============================================
    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
    // ============================================
    
    const defaultConfig = {
      site_title: 'ãƒ„ãƒ¼ãƒ«ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³',
      site_description: 'ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã‚’é›†ã‚ã¾ã—ãŸ',
      primary_color: '#6366f1',
      secondary_color: '#1e1b4b',
      text_color: '#f1f5f9',
      accent_color: '#22d3ee',
      card_color: '#1e293b'
    };

    let config = { ...defaultConfig };
    let currentCategory = 'ã™ã¹ã¦';

    // NEWãƒãƒƒã‚¸ã®åˆ¤å®šï¼ˆè¿½åŠ ã‹ã‚‰3æ—¥ä»¥å†…ï¼‰
    function isNew(addedDate) {
      const added = new Date(addedDate);
      const now = new Date();
      const diffTime = now - added;
      const diffDays = diffTime / (1000 * 60 * 60 * 24);
      return diffDays <= 3;
    }

    // ã‚«ãƒ†ã‚´ãƒªä¸€è¦§ã‚’å–å¾—
    function getCategories() {
      const categories = [...new Set(TOOLS.map(tool => tool.category))];
      return ['ã™ã¹ã¦', ...categories.sort()];
    }

    // ãƒ„ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
    function createToolCard(tool) {
      const isNewTool = isNew(tool.addedDate);
      return `
        <a href="${tool.url}" target="_blank" rel="noopener noreferrer" 
           class="tool-card block rounded-2xl p-6 shadow-xl border border-slate-700/50 hover:border-indigo-500/50 hover:shadow-indigo-500/10"
           style="background: ${config.card_color};">
          <div class="flex items-start justify-between mb-4">
            <span class="text-4xl">${tool.icon}</span>
            ${isNewTool ? `
              <span class="new-badge px-2 py-1 text-xs font-bold rounded-full"
                    style="background: linear-gradient(135deg, #f43f5e, #ec4899); color: white;">
                NEW
              </span>
            ` : ''}
          </div>
          <h3 class="font-display font-bold text-lg mb-2" style="color: ${config.text_color};">
            ${tool.name}
          </h3>
          <p class="text-sm mb-4" style="color: ${config.text_color}; opacity: 0.7;">
            ${tool.description}
          </p>
          <div class="flex items-center justify-between">
            <span class="text-xs px-3 py-1 rounded-full" 
                  style="background: ${config.primary_color}20; color: ${config.accent_color};">
              ${tool.category}
            </span>
            <span style="color: ${config.accent_color};">â†’</span>
          </div>
        </a>
      `;
    }

    // ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
    function createCategoryButton(category, isActive) {
      return `
        <button class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all
                       ${isActive ? 'active' : ''}"
                style="${!isActive ? `background: ${config.card_color}; color: ${config.text_color};` : ''}"
                data-category="${category}">
          ${category}
        </button>
      `;
    }

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’å–å¾—
    function getFilteredTools() {
      if (currentCategory === 'ã™ã¹ã¦') {
        return TOOLS;
      }
      return TOOLS.filter(tool => tool.category === currentCategory);
    }

    // UIã‚’æ›´æ–°
    function renderUI() {
      // ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ã‚’æ›´æ–°
      document.getElementById('site-title').textContent = config.site_title || defaultConfig.site_title;
      document.getElementById('site-description').textContent = config.site_description || defaultConfig.site_description;

      // ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æç”»
      const categories = getCategories();
      const filtersContainer = document.getElementById('category-filters');
      filtersContainer.innerHTML = categories.map(cat => 
        createCategoryButton(cat, cat === currentCategory)
      ).join('');

      // ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
      filtersContainer.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          currentCategory = btn.dataset.category;
          renderUI();
        });
      });

      // ãƒ„ãƒ¼ãƒ«ã‚°ãƒªãƒƒãƒ‰ã‚’æç”»
      const filteredTools = getFilteredTools();
      const toolsGrid = document.getElementById('tools-grid');
      const noResults = document.getElementById('no-results');

      if (filteredTools.length === 0) {
        toolsGrid.innerHTML = '';
        noResults.classList.remove('hidden');
      } else {
        noResults.classList.add('hidden');
        // NEWã®ãƒ„ãƒ¼ãƒ«ã‚’å…ˆé ­ã«ã€ãã®å¾Œã¯è¿½åŠ æ—¥ã®æ–°ã—ã„é †
        const sortedTools = [...filteredTools].sort((a, b) => {
          const aIsNew = isNew(a.addedDate);
          const bIsNew = isNew(b.addedDate);
          if (aIsNew && !bIsNew) return -1;
          if (!aIsNew && bIsNew) return 1;
          return new Date(b.addedDate) - new Date(a.addedDate);
        });
        toolsGrid.innerHTML = sortedTools.map(createToolCard).join('');
      }

      // ãƒ„ãƒ¼ãƒ«æ•°ã‚’æ›´æ–°
      document.getElementById('tool-count').textContent = TOOLS.length;
    }

    // è¨­å®šå¤‰æ›´æ™‚ã®å‡¦ç†
    async function onConfigChange(newConfig) {
      config = { ...defaultConfig, ...newConfig };
      renderUI();
    }

    // SDKåˆæœŸåŒ–
    window.elementSdk.init({
      defaultConfig,
      onConfigChange,
      mapToCapabilities: (cfg) => ({
        recolorables: [
          {
            get: () => cfg.primary_color || defaultConfig.primary_color,
            set: (v) => { cfg.primary_color = v; window.elementSdk.setConfig({ primary_color: v }); }
          },
          {
            get: () => cfg.secondary_color || defaultConfig.secondary_color,
            set: (v) => { cfg.secondary_color = v; window.elementSdk.setConfig({ secondary_color: v }); }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (v) => { cfg.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
          },
          {
            get: () => cfg.accent_color || defaultConfig.accent_color,
            set: (v) => { cfg.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); }
          },
          {
            get: () => cfg.card_color || defaultConfig.card_color,
            set: (v) => { cfg.card_color = v; window.elementSdk.setConfig({ card_color: v }); }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      }),
      mapToEditPanelValues: (cfg) => new Map([
        ['site_title', cfg.site_title || defaultConfig.site_title],
        ['site_description', cfg.site_description || defaultConfig.site_description]
      ])
    });

    // åˆæœŸæç”»
    renderUI();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9caf8a83b7b2eb72',t:'MTc3MDU5OTk5My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
