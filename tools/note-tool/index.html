<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Note整形ツール</title>

<style>
:root{
    --bg:#f5f7fa;
    --card:#ffffff;
    --text:#202124;
    --border:#e0e0e0;
    --accent:#1a73e8;
}

body.dark{
    --bg:#202124;
    --card:#2d2f31;
    --text:#e8eaed;
    --border:#3c4043;
    --accent:#8ab4f8;
}

body{
    margin:0;
    font-family: "Google Sans", "Noto Sans JP", sans-serif;
    background:var(--bg);
    color:var(--text);
}

/* ヘッダー */
header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:14px 20px;
    background:var(--card);
    border-bottom:1px solid var(--border);
    box-shadow:0 2px 4px rgba(0,0,0,0.05);
}

.title{
    font-size:18px;
    font-weight:600;
}

/* トグル */
.switch{
    cursor:pointer;
    padding:6px 14px;
    border-radius:20px;
    background:var(--accent);
    color:#fff;
    border:none;
}

/* レイアウト */
.container{
    display:flex;
    gap:16px;
    padding:16px;
    height:calc(100vh - 70px);
    box-sizing:border-box;
}

/* カード */
.card{
    background:var(--card);
    border-radius:16px;
    box-shadow:0 2px 6px rgba(0,0,0,0.08);
    border:1px solid var(--border);
    display:flex;
    flex-direction:column;
}

/* エディタ */
.editor{
    width:50%;
}

.preview{
    width:50%;
    padding:16px;
    overflow:auto;
}

textarea{
    flex:1;
    border:none;
    outline:none;
    resize:none;
    font-size:15px;
    line-height:1.7;
    padding:16px;
    background:transparent;
    color:var(--text);
}

/* ツールバー */
.toolbar{
    padding:10px;
    border-bottom:1px solid var(--border);
    display:flex;
    flex-wrap:wrap;
    gap:6px;
}

button.tool{
    border:none;
    padding:6px 12px;
    border-radius:18px;
    background:var(--bg);
    cursor:pointer;
}

button.tool:hover{
    background:var(--border);
}

.copy{
    margin-left:auto;
    background:var(--accent);
    color:#fff;
}

/* プレビュー内 */
.preview h2{
    border-bottom:2px solid var(--accent);
    padding-bottom:4px;
}

.preview blockquote{
    border-left:4px solid var(--accent);
    padding-left:10px;
    opacity:0.8;
}

.preview li{
    margin-left:20px;
}
</style>
</head>
<body>

<header>
    <div class="title">Note整形ツール</div>
    <button class="switch" onclick="toggleTheme()">ライト / ダーク</button>
</header>

<div class="container">

    <!-- エディタ -->
    <div class="card editor">
        <div class="toolbar">
            <button class="tool" onclick="insert('## 見出し\n')">H2</button>
            <button class="tool" onclick="insert('### 小見出し\n')">H3</button>
            <button class="tool" onclick="insert('**太字**')">太字</button>
            <button class="tool" onclick="insert('> 引用\n')">引用</button>
            <button class="tool" onclick="insert('- リスト\n')">リスト</button>
            <button class="tool" onclick="insert('---\n')">区切り</button>
            <button class="tool" onclick="insert('```\nコード\n```\n')">コード</button>
            <button class="tool copy" onclick="copyText()">コピー</button>
        </div>

        <textarea id="editor" placeholder="ここに書く → コピー → Noteに貼る"></textarea>
    </div>

    <!-- プレビュー -->
    <div class="card preview" id="preview"></div>

</div>

<script>
const editor = document.getElementById("editor");
const preview = document.getElementById("preview");

editor.addEventListener("input", updatePreview);

function insert(text){
    const start = editor.selectionStart;
    const end = editor.selectionEnd;
    editor.value = editor.value.substring(0,start) + text + editor.value.substring(end);
    editor.focus();
    updatePreview();
}

function copyText(){
    navigator.clipboard.writeText(editor.value);
    alert("コピーしました！");
}

function toggleTheme(){
    document.body.classList.toggle("dark");
}

function updatePreview(){
    let text = editor.value;

    text = text
        .replace(/^### (.*$)/gim, "<h3>$1</h3>")
        .replace(/^## (.*$)/gim, "<h2>$1</h2>")
        .replace(/^\> (.*$)/gim, "<blockquote>$1</blockquote>")
        .replace(/^\- (.*$)/gim, "<li>$1</li>")
        .replace(/\*\*(.*?)\*\*/gim, "<b>$1</b>")
        .replace(/\n/g, "<br>");

    preview.innerHTML = text;
}

updatePreview();
</script>

</body>
</html>
